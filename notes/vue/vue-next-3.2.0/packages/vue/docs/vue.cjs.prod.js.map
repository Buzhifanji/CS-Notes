{"version":3,"file":"vue.cjs.prod.js","sources":["../src/index.ts"],"sourcesContent":["// This entry is the \"full-build\" that includes both the runtime\r\n// and the compiler, and supports on-the-fly compilation of the template option.\r\nimport { initDev } from './dev'\r\nimport { compile, CompilerOptions, CompilerError } from '@vue/compiler-dom'\r\nimport { registerRuntimeCompiler, RenderFunction, warn } from '@vue/runtime-dom'\r\nimport * as runtimeDom from '@vue/runtime-dom'\r\nimport { isString, NOOP, generateCodeFrame, extend } from '@vue/shared'\r\nimport { InternalRenderFunction } from 'packages/runtime-core/src/component'\r\n\r\nif (__DEV__) {\r\n  initDev()\r\n}\r\n\r\nconst compileCache: Record<string, RenderFunction> = Object.create(null)\r\n\r\nfunction compileToFunction(\r\n  template: string | HTMLElement,\r\n  options?: CompilerOptions\r\n): RenderFunction {\r\n  if (!isString(template)) {\r\n    if (template.nodeType) {\r\n      template = template.innerHTML\r\n    } else {\r\n      __DEV__ && warn(`invalid template option: `, template)\r\n      return NOOP\r\n    }\r\n  }\r\n\r\n  const key = template\r\n  const cached = compileCache[key]\r\n  if (cached) {\r\n    return cached\r\n  }\r\n\r\n  if (template[0] === '#') {\r\n    const el = document.querySelector(template)\r\n    if (__DEV__ && !el) {\r\n      warn(`Template element not found or is empty: ${template}`)\r\n    }\r\n    // __UNSAFE__\r\n    // Reason: potential execution of JS expressions in in-DOM template.\r\n    // The user must make sure the in-DOM template is trusted. If it's rendered\r\n    // by the server, the template should not contain any user data.\r\n    template = el ? el.innerHTML : ``\r\n  }\r\n\r\n  const { code } = compile(\r\n    template,\r\n    extend(\r\n      {\r\n        hoistStatic: true,\r\n        onError: __DEV__ ? onError : undefined,\r\n        onWarn: __DEV__ ? e => onError(e, true) : NOOP\r\n      } as CompilerOptions,\r\n      options\r\n    )\r\n  )\r\n\r\n  function onError(err: CompilerError, asWarning = false) {\r\n    const message = asWarning\r\n      ? err.message\r\n      : `Template compilation error: ${err.message}`\r\n    const codeFrame =\r\n      err.loc &&\r\n      generateCodeFrame(\r\n        template as string,\r\n        err.loc.start.offset,\r\n        err.loc.end.offset\r\n      )\r\n    warn(codeFrame ? `${message}\\n${codeFrame}` : message)\r\n  }\r\n\r\n  // The wildcard import results in a huge object with every export\r\n  // with keys that cannot be mangled, and can be quite heavy size-wise.\r\n  // In the global build we know `Vue` is available globally so we can avoid\r\n  // the wildcard object.\r\n  const render = (\r\n    __GLOBAL__ ? new Function(code)() : new Function('Vue', code)(runtimeDom)\r\n  ) as RenderFunction\r\n\r\n  // mark the function as runtime compiled\r\n  ;(render as InternalRenderFunction)._rc = true\r\n\r\n  return (compileCache[key] = render)\r\n}\r\n\r\nregisterRuntimeCompiler(compileToFunction)\r\n\r\nexport { compileToFunction as compile }\r\nexport * from '@vue/runtime-dom'\r\n"],"names":["isString","NOOP","compile","extend","runtimeDom","registerRuntimeCompiler"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAaA,MAAM,YAAY,GAAmC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AAExE,SAAS,iBAAiB,CACxB,QAA8B,EAC9B,OAAyB;IAEzB,IAAI,CAACA,eAAQ,CAAC,QAAQ,CAAC,EAAE;QACvB,IAAI,QAAQ,CAAC,QAAQ,EAAE;YACrB,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAA;SAC9B;aAAM;YAEL,OAAOC,WAAI,CAAA;SACZ;KACF;IAED,MAAM,GAAG,GAAG,QAAQ,CAAA;IACpB,MAAM,MAAM,GAAG,YAAY,CAAC,GAAG,CAAC,CAAA;IAChC,IAAI,MAAM,EAAE;QACV,OAAO,MAAM,CAAA;KACd;IAED,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QACvB,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;;;;;QAQ3C,QAAQ,GAAG,EAAE,GAAG,EAAE,CAAC,SAAS,GAAG,EAAE,CAAA;KAClC;IAED,MAAM,EAAE,IAAI,EAAE,GAAGC,mBAAO,CACtB,QAAQ,EACRC,aAAM,CACJ;QACE,WAAW,EAAE,IAAI;QACjB,OAAO,EAAsB,SAAS;QACtC,MAAM,EAAoCF,WAAI;KAC5B,EACpB,OAAO,CACR,CACF,CAAA;;;;;IAoBD,MAAM,MAAM,IAC0B,IAAI,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,CAACG,qBAAU,CAAC,CACxD,CAGlB;IAAC,MAAiC,CAAC,GAAG,GAAG,IAAI,CAAA;IAE9C,QAAQ,YAAY,CAAC,GAAG,CAAC,GAAG,MAAM,EAAC;AACrC,CAAC;AAEDC,kCAAuB,CAAC,iBAAiB,CAAC;;;;;;;"}